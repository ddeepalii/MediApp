<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediSphere - Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
</head>

<body>
  <section class="background-radial-gradient d-flex align-items-center justify-content-center min-vh-100">
    <div class="container text-center text-white mb-5">
      <h1 class="display-4 fw-bold">MediSphere</h1>
      <p class="lead fst-italic">More Than Treatment — A Partnership in Health.</p>
    </div>

    <div class="container d-flex justify-content-center">
      <div class="card bg-glass p-4 shadow-lg" style="width: 100%; max-width: 500px">
        <div class="card-body">
          <h4 class="mb-4 text-center text-primary">Register New Account</h4>
          <form [formGroup]="itemForm" (ngSubmit)="onRegister()">
            <!-- Username -->
            <div class="mb-3">
              <label for="username" class="form-label">Username</label>
              <input type="text" class="form-control" name="username" formControlName="username"
                placeholder="Enter your username" />
              <div
                *ngIf="itemForm.get('username')?.invalid && (itemForm.get('username')?.dirty || itemForm.get('username')?.touched)"
                class="text-danger mt-1">
                *Please Enter Username.
              </div>
            </div>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label">Email address</label>
              <input type="email" class="form-control" name="email" formControlName="email"
                placeholder="Enter your email" />
              <div
                *ngIf="itemForm.get('email')?.invalid && (itemForm.get('email')?.dirty || itemForm.get('email')?.touched)"
                class="text-danger mt-1">
                <div *ngIf="itemForm.get('email')?.hasError('required')">*Please Enter Email Id</div>
                <div *ngIf="itemForm.get('email')?.hasError('pattern')">*Invalid Email Id</div>
              </div>
            </div>

            <!-- Password -->
            <div class="mb-3">
              <label for="password" class="form-label">Password</label>
              <input type="password" class="form-control" name="password" formControlName="password"
                placeholder="Enter your password" (input)="checkPasswordStrength()" />

              <!-- Password Requirements -->
              <div *ngIf="itemForm.get('password')?.dirty || itemForm.get('password')?.touched" class="mt-2">
                <ul class="password-rules">
                  <li [class.valid]="hasLowercase" [class.invalid]="!hasLowercase">
                    <span>{{ hasLowercase ? '✅' : '❌' }}</span> At least one lowercase letter [a-z]
                  </li>
                  <li [class.valid]="hasUppercase" [class.invalid]="!hasUppercase">
                    <span>{{ hasUppercase ? '✅' : '❌' }}</span> At least one uppercase letter [A-Z]
                  </li>
                  <li [class.valid]="hasDigit" [class.invalid]="!hasDigit">
                    <span>{{ hasDigit ? '✅' : '❌' }}</span> At least one digit [0-9]
                  </li>
                  <li [class.valid]="hasSpecialChar" [class.invalid]="!hasSpecialChar">
                    <span>{{ hasSpecialChar ? '✅' : '❌' }}</span> At least one special character [&#64; $. # ! % * ? & ^]
                  </li>
                  <li [class.valid]="hasMinLength" [class.invalid]="!hasMinLength">
                    <span>{{ hasMinLength ? '✅' : '❌' }}</span> Minimum 8 characters
                  </li>
                </ul>
              </div>
            </div>

            <!-- Confirm Password -->
            <div class="mb-3">
              <label for="confirmPassword" class="form-label">Confirm Password</label>
              <input type="password" class="form-control" name="confirmPassword" formControlName="confirmPassword"
                placeholder="Confirm your password" />
              <div *ngIf="itemForm.get('confirmPassword')?.dirty">
                <div *ngIf="itemForm.get('confirmPassword')?.hasError('notSame')" class="text-danger fw-bold">
                  Passwords do not match.
                </div>
                <div *ngIf="!itemForm.get('confirmPassword')?.hasError('notSame')" class="text-success fw-bold">
                  Password Matched
                </div>
              </div>
            </div>

            <!-- Role -->
            <div class="mb-4">
              <label for="role" class="form-label">Role</label>
              <select class="form-select" name="role" formControlName="role">
                <option value="" disabled selected>Choose Role</option>
                <option value="HOSPITAL">Hospital Employee</option>
                <option value="TECHNICIAN">Technician</option>
                <option value="SUPPLIER">Supplier</option>
              </select>
              <div
                *ngIf="itemForm.get('role')?.invalid && (itemForm.get('role')?.dirty || itemForm.get('role')?.touched)"
                class="text-danger mt-1">
                *Please choose a role.
              </div>
            </div>

            <!-- Submit Button -->
            <button type="submit" class="btn btn-primary w-100 mb-3" [disabled]="itemForm.invalid">
              Submit
            </button>
          </form>

          <!-- Outside the form -->
         
          <p class="text-center">
            Already have an account?
            <a [routerLink]="['/login']" class="text-decoration-none text-primary fw-bold">
              Login
            </a>
          </p>

          <div *ngIf="showMessage" class="text-success fw-bold mt-3" role="alert">
            {{ responseMessage }}
          </div>
          <div *ngIf="showError" class="text-danger fw-bold mt-3" role="alert">
            {{ responseMessage }}
          </div>
        </div>
      </div>
    </div>
  </section>
</body>

</html>