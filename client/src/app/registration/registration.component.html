<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MediSphere - Registration</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
</head>

<body>
  <section class="background-radial-gradient">
    <!-- Animated Background Elements -->
    <div class="floating-shapes">
      <div class="shape shape-1"><i class="fas fa-heartbeat"></i></div>
      <div class="shape shape-2"><i class="fas fa-user-md"></i></div>
      <div class="shape shape-3"><i class="fas fa-hospital"></i></div>
      <div class="shape shape-4"><i class="fas fa-stethoscope"></i></div>
      <div class="shape shape-5"><i class="fas fa-syringe"></i></div>
      <div class="shape shape-6"><i class="fas fa-pills"></i></div>
      <div class="shape shape-7"><i class="fas fa-briefcase-medical"></i></div>
      <div class="shape shape-8"><i class="fas fa-heartbeat"></i></div>
    </div>

    <div class="container-fluid min-vh-100 d-flex flex-column justify-content-center align-items-center py-5">
      <!-- Header Section -->
      <div class="header-section text-center text-white mb-4 fade-in">
        <h1 class="display-3 fw-bold logo-text">
          <i class="fas fa-hospital-symbol me-3"></i>MediSphere
        </h1>
        <p class="lead fst-italic tagline">More Than Treatment ‚Äî A Partnership in Health.</p>
        <div class="pulse-line"></div>
      </div>

      <!-- Registration Card -->
      <div class="registration-container slide-up">
        <div class="card bg-glass shadow-2xl">
          <div class="card-body p-4 p-md-5">
            <div class="text-center mb-4">
              <div class="icon-wrapper mb-3">
                <i class="fas fa-user-plus"></i>
              </div>
              <h4 class="card-title">Register New Account</h4>
              <p class="text-muted small">Join our medical community today</p>
            </div>

            <form [formGroup]="itemForm" (ngSubmit)="onRegister()">
              <!-- Username -->
              <div class="form-group mb-3">
                <label for="username" class="form-label">
                  <i class="fas fa-user me-2"></i>Username
                </label>
                <div class="input-wrapper">
                  <input 
                    type="text" 
                    class="form-control" 
                    id="username"
                    name="username" 
                    formControlName="username"
                    placeholder="Enter your username" />
                  <span class="input-icon"><i class="fas fa-user"></i></span>
                </div>
                <div
                  *ngIf="itemForm.get('username')?.invalid && (itemForm.get('username')?.dirty || itemForm.get('username')?.touched)"
                  class="error-message">
                  <i class="fas fa-exclamation-circle me-1"></i>Please enter a username
                </div>
              </div>

              <!-- Email -->
              <div class="form-group mb-3">
                <label for="email" class="form-label">
                  <i class="fas fa-envelope me-2"></i>Email Address
                </label>
                <div class="input-wrapper">
                  <input 
                    type="email" 
                    class="form-control" 
                    id="email"
                    name="email" 
                    formControlName="email"
                    placeholder="Enter your email" />
                  <span class="input-icon"><i class="fas fa-envelope"></i></span>
                </div>
                <div
                  *ngIf="itemForm.get('email')?.invalid && (itemForm.get('email')?.dirty || itemForm.get('email')?.touched)"
                  class="error-message">
                  <div *ngIf="itemForm.get('email')?.hasError('required')">
                    <i class="fas fa-exclamation-circle me-1"></i>Please enter your email address
                  </div>
                  <div *ngIf="itemForm.get('email')?.hasError('pattern')">
                    <i class="fas fa-exclamation-circle me-1"></i>Please enter a valid email address
                  </div>
                </div>
              </div>

              <!-- Password -->
              <div class="form-group mb-3">
                <label for="password" class="form-label">
                  <i class="fas fa-lock me-2"></i>Password
                </label>
                <div class="input-wrapper">
                  <input 
                    type="password" 
                    class="form-control" 
                    id="password"
                    name="password" 
                    formControlName="password"
                    placeholder="Enter your password" 
                    (input)="checkPasswordStrength()" />
                  <span class="input-icon"><i class="fas fa-lock"></i></span>
                </div>

                <!-- Password Strength Indicator -->
                <div *ngIf="itemForm.get('password')?.dirty || itemForm.get('password')?.touched" class="password-strength-container mt-2">
                  <ul class="password-rules">
                    <li [class.valid]="hasLowercase" [class.invalid]="!hasLowercase">
                      <span class="check-icon">
                        <i class="fas" [ngClass]="hasLowercase ? 'fa-check-circle' : 'fa-times-circle'"></i>
                      </span>
                      <span class="rule-text">At least one lowercase letter [a-z]</span>
                    </li>
                    <li [class.valid]="hasUppercase" [class.invalid]="!hasUppercase">
                      <span class="check-icon">
                        <i class="fas" [ngClass]="hasUppercase ? 'fa-check-circle' : 'fa-times-circle'"></i>
                      </span>
                      <span class="rule-text">At least one uppercase letter [A-Z]</span>
                    </li>
                    <li [class.valid]="hasDigit" [class.invalid]="!hasDigit">
                      <span class="check-icon">
                        <i class="fas" [ngClass]="hasDigit ? 'fa-check-circle' : 'fa-times-circle'"></i>
                      </span>
                      <span class="rule-text">At least one digit [0-9]</span>
                    </li>
                    <li [class.valid]="hasSpecialChar" [class.invalid]="!hasSpecialChar">
                      <span class="check-icon">
                        <i class="fas" [ngClass]="hasSpecialChar ? 'fa-check-circle' : 'fa-times-circle'"></i>
                      </span>
                      <span class="rule-text">At least one special character [$.#!%*?&^]</span>
                    </li>
                    <li [class.valid]="hasMinLength" [class.invalid]="!hasMinLength">
                      <span class="check-icon">
                        <i class="fas" [ngClass]="hasMinLength ? 'fa-check-circle' : 'fa-times-circle'"></i>
                      </span>
                      <span class="rule-text">Minimum 8 characters</span>
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Confirm Password -->
              <div class="form-group mb-3">
                <label for="confirmPassword" class="form-label">
                  <i class="fas fa-lock me-2"></i>Confirm Password
                </label>
                <div class="input-wrapper">
                  <input 
                    type="password" 
                    class="form-control" 
                    id="confirmPassword"
                    name="confirmPassword" 
                    formControlName="confirmPassword"
                    placeholder="Confirm your password" />
                  <span class="input-icon"><i class="fas fa-lock"></i></span>
                </div>
                <div *ngIf="itemForm.get('confirmPassword')?.dirty" class="mt-2">
                  <div *ngIf="itemForm.get('confirmPassword')?.hasError('notSame')" class="error-message">
                    <i class="fas fa-exclamation-circle me-1"></i>Passwords do not match
                  </div>
                  <div *ngIf="!itemForm.get('confirmPassword')?.hasError('notSame')" class="success-message">
                    <i class="fas fa-check-circle me-1"></i>Passwords match
                  </div>
                </div>
              </div>

              <!-- Role -->
              <div class="form-group mb-4">
                <label for="role" class="form-label">
                  <i class="fas fa-user-tag me-2"></i>Role
                </label>
                <div class="input-wrapper">
                  <select class="form-select" id="role" name="role" formControlName="role">
                    <option value="" disabled selected>Choose your role</option>
                    <option value="HOSPITAL">üè• Hospital Employee</option>
                    <option value="TECHNICIAN">üîß Technician</option>
                    <option value="SUPPLIER">üì¶ Supplier</option>
                  </select>
                  <span class="input-icon"><i class="fas fa-chevron-down"></i></span>
                </div>
                <div
                  *ngIf="itemForm.get('role')?.invalid && (itemForm.get('role')?.dirty || itemForm.get('role')?.touched)"
                  class="error-message">
                  <i class="fas fa-exclamation-circle me-1"></i>Please select a role
                </div>
              </div>

              <!-- Submit Button -->
              <button 
                type="submit" 
                class="btn btn-primary btn-submit w-100 mb-3" 
                [disabled]="itemForm.invalid">
                <span class="btn-text">
                  <i class="fas fa-user-plus me-2"></i>Create Account
                </span>
                <span class="btn-icon"><i class="fas fa-arrow-right"></i></span>
              </button>
            </form>

            <!-- Login Link -->
            <div class="text-center mt-3">
              <p class="mb-0">
                Already have an account?
                <a [routerLink]="['/login']" class="login-link">
                  <i class="fas fa-sign-in-alt me-1"></i>Login
                </a>
              </p>
            </div>

            <!-- Success/Error Messages -->
            <div *ngIf="showMessage" class="alert alert-success alert-animated mt-3" role="alert">
              <i class="fas fa-check-circle me-2"></i>{{ responseMessage }}
            </div>
            <div *ngIf="showError" class="alert alert-danger alert-animated mt-3" role="alert">
              <i class="fas fa-exclamation-triangle me-2"></i>{{ responseMessage }}
            </div>
          </div>
        </div>
      </div>

      <!-- Footer -->
      <div class="footer-section text-center text-white mt-4 fade-in">
        <p class="small mb-0">
          <i class="fas fa-shield-alt me-1"></i>
          Your data is secure and protected
        </p>
      </div>
    </div>
  </section>
</body>

</html>
