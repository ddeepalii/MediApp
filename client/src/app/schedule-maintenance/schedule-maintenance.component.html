<!-- <!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MediSphere: Hospital- Schedule Maintenance</title>
</head>
<body>
  

<div class="text-center mb-4 " id="space">
  <h2 class="fw-bold">Schedule Maintenance </h2>
</div>


<div class="container mt-4">
  <div class="card shadow">
    <div class="card-header text-center fw-bold">
      Schedule Maintenance of Equipment
    </div>
    <div class="card-body">
      <form [formGroup]="itemForm" (ngSubmit)="onSubmit()" class="animate__animated animate__fadeIn">

        <div class="row">
         
          <div class="col-md-6">
          
            <div class="mb-3">
              <label class="form-label fw-bold">Hospital</label>
              <select class="form-control" formControlName="hospitalId" (change)="onHospitalSelect($event)">
                <option value="null">Please Choose</option>
                <option *ngFor="let hos of hospitalList" [value]="hos.id">{{ hos.name }}</option>
              </select>
              <div *ngIf="itemForm.controls['hospitalId'].invalid && (itemForm.controls['hospitalId'].dirty || itemForm.controls['hospitalId'].touched)"
                class="text-danger mt-1">
                Please choose a hospital.
              </div>
            </div>

           
            <div class="mb-3">
              <label class="form-label fw-bold">Equipment</label>
              <select class="form-control" formControlName="equipmentId">
                <option value="null">Please Choose</option>
                <option *ngFor="let eq of equipmentList" [value]="eq.id">{{ eq.name }}</option>
              </select>
              <div *ngIf="itemForm.controls['equipmentId'].invalid && (itemForm.controls['equipmentId'].dirty || itemForm.controls['equipmentId'].touched)"
                class="text-danger mt-1">
                Please choose equipment.
              </div>
            </div>
          </div>

      
          <div class="col-md-6">
            <div class="row">
             
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label fw-bold">Scheduled Date</label>
                  <input type="date" class="form-control" formControlName="scheduledDate" />
                  <div *ngIf="itemForm.controls['scheduledDate'].invalid && (itemForm.controls['scheduledDate'].dirty || itemForm.controls['scheduledDate'].touched)"
                    class="text-danger mt-1">
                    Please enter a valid scheduled date.
                  </div>
                </div>
              </div>

             
              <div class="col-md-6">
                <div class="mb-3">
                  <label class="form-label fw-bold">Deadline</label>
                  <input type="date" class="form-control" formControlName="completedDate" />
                  <div *ngIf="itemForm.controls['completedDate'].invalid && (itemForm.controls['completedDate'].dirty || itemForm.controls['completedDate'].touched)"
                    class="text-danger mt-1">
                    Please enter a valid deadline.
                  </div>
                </div>
              </div>
            </div>

           
            <div *ngIf="itemForm.errors?.['invalidDateRangeCheck'] && (itemForm.get('scheduledDate')?.touched || itemForm.get('completedDate')?.touched)"
              class="text-danger fw-bold mb-3">
              Schedule Date must be earlier than Deadline.
            </div>

        
            <div class="mb-3">
              <label class="form-label fw-bold">Description</label>
              <input type="text" class="form-control" formControlName="description" placeholder="Description" />
              <div *ngIf="itemForm.controls['description'].invalid && (itemForm.controls['description'].dirty || itemForm.controls['description'].touched)"
                class="text-danger mt-1">
                Please enter description.
              </div>
            </div>

           
            <div class="d-grid gap-2">
              <button class="btn btn-primary" type="submit" [disabled]="itemForm.invalid">Submit</button>
              <button class="btn btn-secondary" type="button" (click)="showSatus()">Show Status</button>
            </div>

            <div *ngIf="showMessage" class="alert alert-success mt-3">
              {{ responseMessage }}
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<div *ngIf="isClick" class="container mt-5">
  <div class="mb-4">
    <h3 class="fw-bold text-center maintenance-title">Maintenance Information</h3>
  </div>
  
  <div class="row g-4">
    <div class="col-lg-6 col-xl-4" *ngFor="let m of maintenanceList">
      <div class="maintenance-card card h-100 shadow-sm">
        
        <div class="card-header d-flex justify-content-between align-items-center">
          <span class="maintenance-id">
            <i class="bi bi-gear-fill me-2"></i>ID: {{ m.id }}
          </span>
          <span class="status-badge" [ngStyle]="getStatusStyle(m.status)">
            {{ m.status }}
          </span>
        </div>

       
        <div class="card-body">
         
          <div class="dates-section mb-3">
            <div class="date-item">
              <div class="date-label">
                <i class="bi bi-calendar-check me-2"></i>Scheduled Date
              </div>
              <div class="date-value">{{ m.scheduledDate | date : "dd-MMM-yyyy" }}</div>
            </div>
            <div class="date-item mt-2">
              <div class="date-label">
                <i class="bi bi-calendar-x me-2"></i>Deadline
              </div>
              <div class="date-value">{{ m.completedDate | date : "dd-MMM-yyyy" }}</div>
            </div>
          </div>

          <hr class="my-3">

          
          <div class="info-section mb-3">
            <h6 class="section-title">
              <i class="bi bi-tools me-2"></i>Equipment Details
            </h6>
            <div class="info-content">
              <div class="info-row">
                <span class="info-label">ID:</span>
                <span class="info-value">{{ m.equipment.id }}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Name:</span>
                <span class="info-value">{{ m.equipment.name }}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Description:</span>
                <span class="info-value">{{ m.equipment.description }}</span>
              </div>
            </div>
          </div>

          <hr class="my-3">

       
          <div class="info-section">
            <h6 class="section-title">
              <i class="bi bi-hospital me-2"></i>Hospital Details
            </h6>
            <div class="info-content">
              <div class="info-row">
                <span class="info-label">ID:</span>
                <span class="info-value">{{ m.equipment.hospital.id }}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Name:</span>
                <span class="info-value">{{ m.equipment.hospital.name }}</span>
              </div>
              <div class="info-row">
                <span class="info-label">Location:</span>
                <span class="info-value">{{ m.equipment.hospital.location }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html> -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MediSphere: Hospital Schedule Maintenance</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
</head>
<body>
  
<!-- Animated Background Gradient -->
<div class="animated-bg"></div>

<!-- Schedule Maintenance Header -->
<div class="header-section text-center mb-5" id="space">
  <div class="header-icon-wrapper">
    <i class="bi bi-tools header-icon"></i>
  </div>
  <h2 class="fw-bold main-title">Schedule Maintenance</h2>
  <div class="title-underline"></div>
  <p class="header-subtitle">Manage and track equipment maintenance schedules</p>
</div>

<!-- Schedule Maintenance Form -->
<div class="container mt-4">
  <div class="card main-card shadow-lg">
    <div class="card-header-custom text-center">
      <i class="bi bi-clipboard-check me-2"></i>
      <span class="fw-bold">Schedule Maintenance of Equipment</span>
    </div>
    <div class="card-body p-4">
      <form [formGroup]="itemForm" (ngSubmit)="onSubmit()" class="animate__animated animate__fadeIn">

        <div class="row g-4">
          <!-- Left Side -->
          <div class="col-md-6">
            <!-- Hospital Dropdown -->
            <div class="mb-4 form-group-animated">
              <label class="form-label-custom">
                <i class="bi bi-hospital me-2"></i>Hospital
              </label>
              <div class="select-wrapper">
                <select class="form-control-custom" formControlName="hospitalId" (change)="onHospitalSelect($event)">
                  <option value="null">Please Choose Hospital</option>
                  <option *ngFor="let hos of hospitalList" [value]="hos.id">{{ hos.name }}</option>
                </select>
                <i class="bi bi-chevron-down select-icon"></i>
              </div>
              <div *ngIf="itemForm.controls['hospitalId'].invalid && (itemForm.controls['hospitalId'].dirty || itemForm.controls['hospitalId'].touched)"
                class="error-message">
                <i class="bi bi-exclamation-circle me-1"></i>
                Please choose a hospital.
              </div>
            </div>

            <!-- Equipment Dropdown -->
            <div class="mb-4 form-group-animated">
              <label class="form-label-custom">
                <i class="bi bi-gear-fill me-2"></i>Equipment
              </label>
              <div class="select-wrapper">
                <select class="form-control-custom" formControlName="equipmentId">
                  <option value="null">Please Choose Equipment</option>
                  <option *ngFor="let eq of equipmentList" [value]="eq.id">{{ eq.name }}</option>
                </select>
                <i class="bi bi-chevron-down select-icon"></i>
              </div>
              <div *ngIf="itemForm.controls['equipmentId'].invalid && (itemForm.controls['equipmentId'].dirty || itemForm.controls['equipmentId'].touched)"
                class="error-message">
                <i class="bi bi-exclamation-circle me-1"></i>
                Please choose equipment.
              </div>
            </div>
          </div>

          <!-- Right Side -->
          <div class="col-md-6">
            <div class="row g-3">
              <!-- Scheduled Date -->
              <div class="col-md-6">
                <div class="mb-3 form-group-animated">
                  <label class="form-label-custom">
                    <i class="bi bi-calendar-check me-2"></i>Scheduled Date
                  </label>
                  <div class="input-icon-wrapper">
                    <input type="date" class="form-control-custom" formControlName="scheduledDate" />
                  </div>
                  <div *ngIf="itemForm.controls['scheduledDate'].invalid && (itemForm.controls['scheduledDate'].dirty || itemForm.controls['scheduledDate'].touched)"
                    class="error-message">
                    <i class="bi bi-exclamation-circle me-1"></i>
                    Please enter a valid scheduled date.
                  </div>
                </div>
              </div>

              <!-- Deadline -->
              <div class="col-md-6">
                <div class="mb-3 form-group-animated">
                  <label class="form-label-custom">
                    <i class="bi bi-calendar-x me-2"></i>Deadline
                  </label>
                  <div class="input-icon-wrapper">
                    <input type="date" class="form-control-custom" formControlName="completedDate" />
                  </div>
                  <div *ngIf="itemForm.controls['completedDate'].invalid && (itemForm.controls['completedDate'].dirty || itemForm.controls['completedDate'].touched)"
                    class="error-message">
                    <i class="bi bi-exclamation-circle me-1"></i>
                    Please enter a valid deadline.
                  </div>
                </div>
              </div>
            </div>

            <!-- Custom Date Validation -->
            <div *ngIf="itemForm.errors?.['invalidDateRangeCheck'] && (itemForm.get('scheduledDate')?.touched || itemForm.get('completedDate')?.touched)"
              class="alert-custom alert-danger mb-3">
              <i class="bi bi-exclamation-triangle-fill me-2"></i>
              Schedule Date must be earlier than Deadline.
            </div>

            <!-- Description -->
            <div class="mb-4 form-group-animated">
              <label class="form-label-custom">
                <i class="bi bi-file-text me-2"></i>Description
              </label>
              <div class="input-icon-wrapper">
                <textarea class="form-control-custom textarea-custom" formControlName="description" placeholder="Enter maintenance description..." rows="3"></textarea>
              </div>
              <div *ngIf="itemForm.controls['description'].invalid && (itemForm.controls['description'].dirty || itemForm.controls['description'].touched)"
                class="error-message">
                <i class="bi bi-exclamation-circle me-1"></i>
                Please enter description.
              </div>
            </div>

            <!-- Buttons -->
            <div class="button-group">
              <button class="btn-custom btn-primary-custom" type="submit" [disabled]="itemForm.invalid">
                <i class="bi bi-check-circle me-2"></i>
                <span>Submit Maintenance</span>
                <div class="btn-shine"></div>
              </button>
              <button class="btn-custom btn-secondary-custom" type="button" (click)="showSatus()">
                <i class="bi bi-eye me-2"></i>
                <span>Show Status</span>
                <div class="btn-shine"></div>
              </button>
            </div>

            <!-- Success Message -->
            <div *ngIf="showMessage" class="success-message-custom">
              <i class="bi bi-check-circle-fill me-2"></i>
              {{ responseMessage }}
            </div>
          </div>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Maintenance Records Card Grid -->
<div *ngIf="isClick" class="container mt-5 records-section">
  <div class="mb-5 text-center">
    <div class="records-header-icon">
      <i class="bi bi-card-list"></i>
    </div>
    <h3 class="fw-bold maintenance-records-title">Maintenance Records</h3>
    <div class="records-title-underline"></div>
    <p class="records-subtitle">Track all your scheduled maintenance activities</p>
  </div>
  
  <div class="row g-4">
    <div class="col-lg-6 col-xl-4" *ngFor="let m of maintenanceList; let i = index">
      <div class="maintenance-card-enhanced card h-100">
        <!-- Card Top Accent -->
        <div class="card-top-accent"></div>
        
        <!-- Card Header with Status -->
        <div class="card-header-enhanced d-flex justify-content-between align-items-center">
          <span class="maintenance-id-enhanced">
            <i class="bi bi-gear-fill me-2 rotating-gear"></i>ID: {{ m.id }}
          </span>
          <span class="status-badge-enhanced" [ngStyle]="getStatusStyle(m.status)">
            <i class="bi bi-circle-fill status-indicator me-1"></i>
            {{ m.status }}
          </span>
        </div>

        <!-- Card Body -->
        <div class="card-body-enhanced">
          <!-- Dates Section -->
          <div class="dates-section-enhanced mb-4">
            <div class="date-card-item">
              <div class="date-icon-wrapper scheduled">
                <i class="bi bi-calendar-check"></i>
              </div>
              <div class="date-content">
                <div class="date-label-enhanced">Scheduled Date</div>
                <div class="date-value-enhanced">{{ m.scheduledDate | date : "dd-MMM-yyyy" }}</div>
              </div>
            </div>
            <div class="date-card-item mt-3">
              <div class="date-icon-wrapper deadline">
                <i class="bi bi-calendar-x"></i>
              </div>
              <div class="date-content">
                <div class="date-label-enhanced">Deadline</div>
                <div class="date-value-enhanced">{{ m.completedDate | date : "dd-MMM-yyyy" }}</div>
              </div>
            </div>
          </div>

          <div class="section-divider"></div>

          <!-- Equipment Section -->
          <div class="info-section-enhanced mb-4">
            <h6 class="section-title-enhanced">
              <div class="section-icon-wrapper equipment">
                <i class="bi bi-tools"></i>
              </div>
              Equipment Details
            </h6>
            <div class="info-content-enhanced">
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-hash"></i>ID
                </span>
                <span class="info-value-enhanced">{{ m.equipment.id }}</span>
              </div>
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-tag"></i>Name
                </span>
                <span class="info-value-enhanced">{{ m.equipment.name }}</span>
              </div>
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-info-circle"></i>Description
                </span>
                <span class="info-value-enhanced">{{ m.equipment.description }}</span>
              </div>
            </div>
          </div>

          <div class="section-divider"></div>

          <!-- Hospital Section -->
          <div class="info-section-enhanced">
            <h6 class="section-title-enhanced">
              <div class="section-icon-wrapper hospital">
                <i class="bi bi-hospital"></i>
              </div>
              Hospital Details
            </h6>
            <div class="info-content-enhanced">
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-hash"></i>ID
                </span>
                <span class="info-value-enhanced">{{ m.equipment.hospital.id }}</span>
              </div>
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-building"></i>Name
                </span>
                <span class="info-value-enhanced">{{ m.equipment.hospital.name }}</span>
              </div>
              <div class="info-row-enhanced">
                <span class="info-label-enhanced">
                  <i class="bi bi-geo-alt"></i>Location
                </span>
                <span class="info-value-enhanced">{{ m.equipment.hospital.location }}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

</body>
</html>
